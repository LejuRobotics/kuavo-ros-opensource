# 测试说明

  - 测试机器人键盘控制相关说明

### 实机运行步骤

1. 编译
  - 在lab目录下打开一个终端执行 `cd kuavo-ros-opensource` 
  - 执行 `sudo su` 进入root用户
  - 执行 `catkin build kuavo_sdk` 完成编译 

2. 运行 
  - 在lab目录下打开一个终端执行 `cd kuavo-ros-opensource` 
  - 执行 `sudo su` 进入root用户，
  - 执行 `source devel/setup.bash` ， 
  - 执行 `roslaunch humanoid_controllers load_kuavo_real.launch joystick_type:=h12 cali:=true cali_arm:=true` 使机器人站立,

  - 新开一个终端执行 `cd kuavo-ros-opensource`
  - 执行 `sudo su` 进入root用户，
  - 执行 `source devel/setup.bash` ，
  - 执行 `python3 src/kuavo_sdk/scripts/keyboard_control/robot_keyboard_control.py` ，

3. 测试方式
 - 初始为`键盘控制手臂模式`

 - 按`v`在`键盘控制手臂模式`和`键盘控制机器人移动模式`间切换

 - 键盘控制机器人移动模式:

     按键盘WASD为左操纵杆，控制前进/后退，左/右横移；IKJL/QE为右操纵杆、上/下、左转/右转,每按动一次值增加或减小10%；R是walk；C是stance；T是trot；B是back；O/F是start；空格是将左右操纵杆的输入重置为零。

 - 键盘控制手臂模式:

   根据键盘输入更新末端执行器`位置控制(XYZ)`与`姿态控制(RPY)`的参数值:

   | 控制 |   X   |   Y   |   Z   | Roll  | Pitch  | Yaw  |
   |:----:|:-----:|:-----:|:-----:|:-----:|:------:|:----:|
   |  加  |  `w`  |  `d`  |  `q`  |  `u`  |  `i`   | `j`  |
   |  减  |  `s`  |  `a`  |  `e`  |  `o`  |  `k`   | `l`  |

   按`G`切换控制模式,在`手动控制`和`自动控制`两者间切换

   `位置控制(XYZ)`的变化会相应修改`self.eef_target_xyz`的值

   `姿态控制(RPY)`的变化会相应修改`self.eef_angle_manual`的值

   注: 
     - `self.eef_target_ypr`的值为自动生成,不要手动修改
     - `Yaw`的推荐赋值范围为`负九十度 ~ 正九十度`
     - `Pitch`和`Roll`的推荐赋值范围为`负三十度 ~ 正三十度`

## 键盘控制手臂移动 参数说明

    - 键盘控制手臂模式:

      根据键盘输入更新末端执行器`位置控制(XYZ)`与`姿态控制(RPY)`的参数值:

      | 控制 |   X   |   Y   |   Z   | Roll  | Pitch  | Yaw  |
      |:----:|:-----:|:-----:|:-----:|:-----:|:------:|:----:|
      |  加  |  `w`  |  `d`  |  `q`  |  `u`  |  `i`   | `j`  |
      |  减  |  `s`  |  `a`  |  `e`  |  `o`  |  `k`   | `l`  |

      按`G`切换控制模式,在`手动控制`和`自动控制`两者间切换

      `位置控制(XYZ)`的变化会相应修改`self.eef_target_xyz`的值

      `姿态控制(RPY)`的变化会相应修改`self.eef_angle_manual`的值

      注: 
        - `self.eef_target_ypr`的值为自动生成,不要手动修改
        - `Yaw`的推荐赋值范围为`负九十度 ~ 正九十度`
        - `Pitch`和`Roll`的推荐赋值范围为`负三十度 ~ 正三十度`,